[TOC]

## 数据库设计文档

### 如何实现数组字段的CRUD？

由于MongoDB不必遵从第一范式，所以增删查改自需要一次调用接口就行了。

### 数组字段vs多字段的性能差别？

数据字段读取快，可以一次性读取全部需要的信息，有效地减少硬盘读写，但是在硬盘空间消耗上较多，冗余度很高，是典型的时空权衡，比较适合MongoDB这种需要减少硬盘读写的文档型数据库。

多字段查询上稍微慢，但是大大减少了空间冗余度。但是在保持数据一致性上有少许困难。但是现代关系型数据库软件非常成熟，因此多字段查询在大型项目里非常常见。

### REST API是怎样设计用于CRUD操作的

RESTFUL API是一种接口设计风格，一般用HTTP幂等动词GET和PUT对应幂等的数据库操作查和改，用HTTP操作POST和DELETE对应数据库操作增加和删除。

而RESTFUL API的路径则对应数据库的某张表或者某个文档(在NoSQL中)。

进一步更加复杂的操作可用子路径和URL query参数来区分，实现参数化查询。

### 各种表的参考完整性是如何保证的

本次实验的参照完整性是借助NodeJS模块`mongoose-auto-increment`实现的，它有自动增长和模拟外键关联两种功能，保证了参照完整性。

### 如何用SQL的 AO / window function / subquery解决查询问题？

MongoDB在NodeJS里的查询主要是通过异步控制和参数查询来解决查询问题的。

### 如何防止外部导入数据时流水号的冲突

`mongoose-auto-increment`保证了没有流水号冲突，而且也不存在外部导入数据这种功能啊

### 各种数据表是如何备份的

没有数据表备份功能。

### pool_disagrees这样的字段用静态字段表示和用动态字段表示有何差别？

动态字段消耗时间性能，静态字段消耗空间性能，且不好保证一致性。

### 使用db adapter 还是db ORM？

后者，ORM模型的简单性简化了数据库查询过程。使用ORM查询工具，用户可以访问期望数据，而不必理解数据库的底层结构。我们这只是一个作业而已。

### 真正的权限管理是一个有向无环图而不是树

因为现实环境中，父角色如公司老总不一定有子角色如公司CEO的权限，这种权限分离是很常见的，如果是树的话，父角色包裹了子角色，应该有子角色的所有权限才对，两者矛盾。因此是一个有向无环图，而不是退化为树。